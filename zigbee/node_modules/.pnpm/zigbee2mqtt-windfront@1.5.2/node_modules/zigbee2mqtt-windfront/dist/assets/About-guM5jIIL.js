import{r as x,b as v,j as e,L as b,a as h,bU as p,bV as f,bW as k,bX as $,bY as y,bZ as z,b_ as E,ap as u}from"./index-B9KSRkAy.js";import{s as S}from"./snakeCase-BsE9z82R.js";import"./envs-DFlyG_dH.js";import"./_createCompounder-Db7SjIIq.js";const R="1.5.2",N={version:R};function m({name:t,data:s}){const r=[],{t:a}=v("stats");for(const n in s){const i=s[n];r.push(e.jsx("li",{children:e.jsxs(b,{to:"#",children:[n,": ",i]})},n))}return e.jsx("li",{children:e.jsxs("details",{children:[e.jsx("summary",{children:a(t)}),e.jsx("ul",{children:r})]})})}const L=x.memo(t=>{const{devices:s}=t,{t:r}=v(["stats","zigbee"]),a=x.useMemo(()=>{const n={},i={},l={},d={};for(const o of s){if(o.type==="Coordinator")continue;const c=r(`zigbee:${o.type}`),g=o.model_id||r("zigbee:unknown"),j=o.manufacturer||r("zigbee:unknown"),_=r(`zigbee:${S(o.power_source||"unknown")}`);n[c]=(n[c]||0)+1,i[_]=(i[_]||0)+1,l[g]=(l[g]||0)+1,d[j]=(d[j]||0)+1}return e.jsxs(e.Fragment,{children:[e.jsx(m,{name:"byType",data:n}),e.jsx(m,{name:"byPowerSource",data:i}),e.jsx(m,{name:"byModel",data:l}),e.jsx(m,{name:"byVendor",data:d})]})},[s,r]);return e.jsxs("ul",{children:[e.jsx("li",{children:e.jsxs(b,{to:"#",children:[r("total")," ",s.length-1]})}),a]})}),w=x.memo(()=>{const{t}=v("zigbee"),s=h(n=>n.bridgeInfo),r=h(n=>n.bridgeHealth),a={labels:"problem",title:"???",body:`<!-- MAKE SURE THIS IS NOT ALREADY POSTED ${u.slice(0,-4)} -->

### What happened?

### What did you expect to happen?

### How to reproduce it (minimal and precise)

### Debug logs

### Details
os: \`${s.os.version}\`
node: \`${s.os.node_version}\`
homeassistant: \`${s.config.homeassistant.enabled}\`
zigbee2mqtt: \`${s.version}\` (\`${s.commit}\`)
zigbee-herdsman: \`${s.zigbee_herdsman.version}\`
zigbee-herdsman-converters: \`${s.zigbee_herdsman_converters.version}\`
adapter: \`${s.coordinator.type}\` \`${JSON.stringify(s.coordinator.meta)}\``};return r.response_time>0&&(a.body+=`
#### Last health check
time: \`${new Date(r.response_time)}\`
os.load_average: \`${r.os.load_average.join(", ")}\`
os.memory_percent: \`${r.os.memory_percent}\`
process.memory_percent: \`${r.process.memory_percent}\`
process.uptime_sec: \`${Math.round(r.process.uptime_sec)}\`
`),e.jsx(b,{target:"_blank",rel:"noopener noreferrer",to:`${u}?${new URLSearchParams(a).toString()}`,className:"btn btn-ghost",children:t("report_problem")})});function I(){const{t}=v("settings"),s=h(c=>c.bridgeInfo),r=h(c=>c.devices),n=s.version.match(/^\d+\.\d+\.\d+$/)===null?e.jsx("a",{className:"link link-hover text-secondary",target:"_blank",rel:"noopener noreferrer",href:`${p}dev/`,children:s.version}):e.jsx("a",{className:"link link-hover",target:"_blank",rel:"noopener noreferrer",href:`${f}${s.version}`,children:s.version}),i=s.commit?e.jsxs(e.Fragment,{children:["commit:"," ",e.jsx("a",{className:"link",target:"_blank",rel:"noopener noreferrer",href:`${p}${s.commit}`,children:s.commit})]}):null,l=e.jsx("a",{className:"link link-hover",target:"_blank",rel:"noopener noreferrer",href:`${E}${N.version}`,children:N.version}),d=e.jsx("a",{className:"link link-hover",target:"_blank",rel:"noopener noreferrer",href:`${k}${s.zigbee_herdsman_converters.version}`,children:s.zigbee_herdsman_converters.version}),o=e.jsx("a",{className:"link link-hover",target:"_blank",rel:"noopener noreferrer",href:`${$}${s.zigbee_herdsman.version}`,children:s.zigbee_herdsman.version});return e.jsxs("div",{className:"flex flex-col gap-3 items-center",children:[e.jsx(w,{}),e.jsxs("div",{className:"stats stats-vertical lg:stats-horizontal shadow",children:[e.jsxs("div",{className:"stat place-items-center",children:[e.jsx("div",{className:"stat-title",children:t("zigbee2mqtt_version")}),e.jsx("div",{className:"stat-value text-lg",children:n}),e.jsx("div",{className:"stat-desc",children:i})]}),e.jsxs("div",{className:"stat place-items-center",children:[e.jsx("div",{className:"stat-title",children:t("frontend_version")}),e.jsx("div",{className:"stat-value text-lg",children:l})]}),e.jsxs("div",{className:"stat place-items-center",children:[e.jsx("div",{className:"stat-title",children:t("zigbee_herdsman_converters_version")}),e.jsx("div",{className:"stat-value text-lg",children:d})]}),e.jsxs("div",{className:"stat place-items-center",children:[e.jsx("div",{className:"stat-title",children:t("zigbee_herdsman_version")}),e.jsx("div",{className:"stat-value text-lg",children:o})]})]}),e.jsxs("div",{className:"stats stats-vertical lg:stats-horizontal shadow",children:[e.jsxs("div",{className:"stat place-items-center",children:[e.jsx("div",{className:"stat-title",children:t("machine")}),e.jsx("div",{className:"stat-value text-lg",children:s.os.version}),e.jsxs("div",{className:"stat-desc",children:["CPU: ",s.os.cpus]}),e.jsxs("div",{className:"stat-desc",children:["RAM: ",s.os.memory_mb," MB"]})]}),e.jsxs("div",{className:"stat place-items-center",children:[e.jsx("div",{className:"stat-title",children:t("mqtt")}),e.jsx("div",{className:"stat-value text-lg",children:s.mqtt.server}),e.jsx("div",{className:"stat-desc",children:e.jsxs("a",{href:y,target:"_blank",rel:"noreferrer",className:"link link-hover",children:[t("version"),": ",s.mqtt.version]})})]}),e.jsxs("div",{className:"stat place-items-center",children:[e.jsx("div",{className:"stat-title",children:t("node_version")}),e.jsx("div",{className:"stat-value text-lg",children:e.jsx("a",{href:z,target:"_blank",rel:"noreferrer",className:"link link-hover",children:s.os.node_version})})]}),e.jsxs("div",{className:"stat place-items-center",children:[e.jsx("div",{className:"stat-title",children:t("coordinator")}),e.jsx("div",{className:"stat-value text-lg",children:s.coordinator.type}),e.jsx("div",{className:"stat-desc",children:e.jsx("span",{className:"badge badge-sm badge-primary",title:t("coordinator_ieee_address"),children:s.coordinator.ieee_address})}),e.jsxs("div",{className:"stat-desc",children:[t("revision"),": ",s.coordinator.meta.revision||t("zigbee:unknown")]})]})]}),e.jsx("ul",{className:"menu bg-base-100 rounded-box shadow min-w-sm",children:e.jsx("li",{children:e.jsxs("details",{open:!0,children:[e.jsx("summary",{children:t("stats")}),e.jsx(L,{devices:r})]})})})]})}export{I as default};

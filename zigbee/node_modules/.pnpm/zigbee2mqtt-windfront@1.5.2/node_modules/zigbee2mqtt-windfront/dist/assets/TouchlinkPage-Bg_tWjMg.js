import{r,W as y,E as _,a as o,b as C,Z as I,$ as F,a0 as P,j as s,L as S,B as m,F as b,a1 as k,a2 as w,a3 as N}from"./index-B9KSRkAy.js";import{T}from"./Table-D8Gdn1uG.js";import"./envs-DFlyG_dH.js";import"./DebouncedInput-BbusN73N.js";function A(){const{sendMessage:i}=r.useContext(y),a=_(),x=o(e=>e.touchlinkDevices),d=o(e=>e.devices),c=o(e=>e.touchlinkIdentifyInProgress),l=o(e=>e.touchlinkResetInProgress),f=o(e=>e.touchlinkScanInProgress),u=c||l,{t:n}=C(["touchlink","common","zigbee"]),p=r.useCallback(async()=>{a(I({inProgress:!0,devices:[]})),await i("bridge/request/touchlink/scan","")},[i,a]),g=r.useCallback(async e=>{a(F(!0)),await i("bridge/request/touchlink/identify",e)},[i,a]),h=r.useCallback(async e=>{a(P(!0)),await i("bridge/request/touchlink/factory_reset",e)},[i,a]),j=r.useMemo(()=>[{id:"ieee_address",header:n("zigbee:ieee_address"),accessorFn:e=>e.ieee_address,cell:({row:{original:e}})=>d.find(t=>t.ieee_address===e.ieee_address)?s.jsx(S,{to:`/device/${e.ieee_address}/info`,className:"link link-hover",children:e.ieee_address}):e.ieee_address,filterFn:"includesString",sortingFn:(e,t)=>e.original.ieee_address.localeCompare(t.original.ieee_address)},{id:"friendly_name",header:n("common:friendly_name"),accessorFn:e=>d.find(t=>t.ieee_address===e.ieee_address)?.friendly_name,filterFn:"includesString"},{id:"channel",header:n("zigbee:channel"),accessorFn:e=>e.channel,filterFn:"includesString"},{id:"actions",header:"",cell:({row:{original:e}})=>s.jsxs("div",{className:"join join-horizontal",children:[s.jsx(m,{disabled:u,item:e,title:n("identify"),className:"btn btn-square btn-outline btn-primary join-item",onClick:g,children:s.jsx(b,{icon:c?k:w,spin:c})}),s.jsx(m,{disabled:u,item:e,title:n("factory_reset"),className:"btn btn-square btn-outline btn-error join-item",onClick:h,children:s.jsx(b,{icon:l?k:N,spin:l})})]}),enableSorting:!1,enableColumnFilter:!1}],[c,l,u,d,n,g,h]);return f?s.jsx("div",{className:"flex flex-row justify-center items-center gap-2",children:s.jsx("span",{className:"loading loading-infinity loading-xl"})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex flex-row flex-wrap justify-center items-center gap-2 mb-3",children:s.jsx(m,{className:"btn btn-primary",onClick:p,disabled:f,children:n("scan")})}),s.jsx(T,{id:"touchlink-devices",columns:j,data:x})]})}export{A as default};
